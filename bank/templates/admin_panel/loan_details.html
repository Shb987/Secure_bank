<!-- templates/admin_panel/loan_details.html -->
{% extends "base.html" %}

{% block title %}Loan Request #{{ loan.id }} | SecureBank Admin{% endblock %}

{% block content %}
<section class="py-12 bg-white">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-6">Loan Request #{{ loan.id }}</h1>

    <div class="bg-gray-50 rounded-xl shadow-sm border border-gray-200 p-8">
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <div>
          <p class="text-gray-600 text-sm">Applicant</p>
          <p class="text-lg font-semibold text-gray-900">{{ loan.user.get_full_name }}</p>
        </div>
        <div>
          <p class="text-gray-600 text-sm">Email</p>
          <p class="text-lg text-gray-900">{{ loan.user.email }}</p>
        </div>
        <div>
          <p class="text-gray-600 text-sm">Loan Amount</p>
          <p class="text-lg font-semibold text-gray-900">${{ loan.amount }}</p>
        </div>
        <div>
          <p class="text-gray-600 text-sm">Status</p>
          <span class="
            inline-block px-3 py-1 text-sm font-semibold rounded-full 
            {% if loan.status == 'Approved' %}bg-green-100 text-green-700
            {% elif loan.status == 'Rejected' %}bg-red-100 text-red-700
            {% else %}bg-yellow-100 text-yellow-700{% endif %}
          ">
            {{ loan.status }}
          </span>
        </div>
        <div class="md:col-span-2">
          <p class="text-gray-600 text-sm mb-1">Purpose</p>
          <p class="text-gray-900">{{ loan.reason }}</p>
        </div>
        <div class="md:col-span-2">
          <p class="text-gray-600 text-sm mb-1">Requested On</p>
          <p class="text-gray-900">{{ loan.created_at|date:"F d, Y H:i A" }}</p>
        </div>
      </div>

      {% if loan.status == "Pending" %}
        <div class="flex space-x-4 mt-8">
          <a href="{% url 'approve_loan' loan.id %}" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-button font-medium">
            Approve
          </a>
          <a href="{% url 'reject_loan' loan.id %}" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-button font-medium">
            Reject
          </a>
        </div>
      {% else %}
        <p class="mt-8 text-gray-600">This loan request has already been <strong>{{ loan.status }}</strong>.</p>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}
