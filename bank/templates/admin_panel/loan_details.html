{% extends "admin_panel/base.html" %}

{% block title %}Loan #{{ loan.id }} Details | SecureBank Admin{% endblock %}
{% block page_title %}Loan #{{ loan.id }} Details{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mb-6">

  <a href="{% url 'loans_approved' %}" 
    class="flex items-center text-gray-500 hover:text-gray-700">
    <i class="ri-arrow-left-line text-lg mr-2"></i>
    Back to Approved Loans
  </a>
</div>

<section class="max-w-4xl mx-auto bg-white shadow-sm border border-gray-200 rounded-xl p-6">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">Loan Application Details</h2>

  <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <dt class="font-medium text-gray-700">Applicant</dt>
      <dd class="text-gray-900">{{ loan.user.get_full_name }} ({{ loan.user.email }})</dd>
    </div>

    <div>
      <dt class="font-medium text-gray-700">Amount</dt>
      <dd class="text-gray-900">${{ loan.amount }}</dd>
    </div>

    <div>
      <dt class="font-medium text-gray-700">Loan Type</dt>
      <dd class="text-gray-900">{{ loan.loan_type }}</dd>
    </div>

    <div>
      <dt class="font-medium text-gray-700">Term (Months)</dt>
      <dd class="text-gray-900">{{ loan.term_months }}</dd>
    </div>

    <div>
      <dt class="font-medium text-gray-700">Interest Rate</dt>
      <dd class="text-gray-900">{{ loan.interest_rate }}%</dd>
    </div>

    <div>
      <dt class="font-medium text-gray-700">Status</dt>
      <dd>
        <span class="px-3 py-1 text-sm rounded-full 
          {% if loan.status == 'Approved' %}bg-green-100 text-green-700
          {% elif loan.status == 'Rejected' %}bg-red-100 text-red-700
          {% else %}bg-yellow-100 text-yellow-700{% endif %}">
          {{ loan.status }}
        </span>
      </dd>
    </div>

    <div>
      <dt class="font-medium text-gray-700">Application Date</dt>
      <dd class="text-gray-900">{{ loan.application_date|date:"M d, Y H:i" }}</dd>
    </div>

    {% if loan.approved_date %}
    <div>
      <dt class="font-medium text-gray-700">Approved Date</dt>
      <dd class="text-gray-900">{{ loan.approved_date|date:"M d, Y H:i" }}</dd>
    </div>
    {% endif %}
  </dl>

  <div class="mt-6">
    <dt class="font-medium text-gray-700">Purpose</dt>
    <dd class="text-gray-900 mt-2">{{ loan.purpose }}</dd>
  </div>
</section>
{% endblock %}
